<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>éƒ¨å±‹åæ¤œç´¢</title>
</head>

<body>
    
    <h2>ğŸšª éƒ¨å±‹åã§æ•™å®¤ã‚’æ¤œç´¢</h2>
    
    <form action="{% url 'agileca:search_roomname' %}" method="GET" class="search-form" style="border: 1px solid #ccc; padding: 20px; border-radius: 5px; background-color: #f9f9f9;">
        
        <input 
            type="text" 
            name="q" 
            placeholder="éƒ¨å±‹åã‚’å…¥åŠ›" 
            value="{{ query|default_if_none:'' }}"
            style="padding: 8px; width: 300px; border: 1px solid #ddd; border-radius: 4px;"
        >
        
        <button type="submit" style="padding: 8px 15px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
            æ¤œç´¢
        </button>
        
        {% if query %}
            <a href="{% url 'agileca:search_roomname' %}" style="margin-left: 10px; color: #6c757d; text-decoration: none;">
                ãƒªã‚»ãƒƒãƒˆ
            </a>
        {% endif %}
    </form>

    <hr style="margin-top: 30px; margin-bottom: 20px;">

    {% if rooms %}
        <h3>æ¤œç´¢çµæœ ({{ rooms.count }} ä»¶)</h3>
        <ul style="list-style: none; padding: 0;">
            {% for room in rooms %}
                <li style="border: 1px solid #eee; padding: 15px; margin-bottom: 10px; border-left: 5px solid #007bff; border-radius: 5px;">
                    
                    <h4>{{ room.room_name }} ({{ room.floor }}éš)</h4>
                    
                    <p><strong>å»ºç‰©:</strong> 
                        <span style="display: inline-block; background-color: #e0f7ff; color: #007bff; padding: 3px 8px; margin-right: 10px; border-radius: 12px; font-size: 0.9em;">
                            {{ room.building.name }}
                        </span>
                    </p>
                    
                    <p><strong>æ‹…å½“æ•™æˆ:</strong> 
                        {% if room.professor %}
                            <span style="display: inline-block; background-color: #ffe6e6; color: #ff4d4d; padding: 3px 8px; margin-right: 10px; border-radius: 12px; font-size: 0.9em;">
                                {{ room.professor.name }}
                            </span>
                        {% else %}
                            <span style="color: #6c757d;">æœªå®š</span>
                        {% endif %}
                    </p>
                    
                    <p><strong>ç”¨é€”:</strong> 
                        {% for attr in room.attributes.all %}
                            <span style="display: inline-block; background-color: #e6ffed; color: #28a745; padding: 3px 8px; margin-right: 5px; border-radius: 12px; font-size: 0.9em;">
                                {{ attr.name }}
                            </span>
                        {% empty %}
                            <span style="color: #6c757d;">å±æ€§ãªã—</span>
                        {% endfor %}
                    </p>
                </li>
            {% endfor %}
        </ul>
    
    {% elif query %}
        <p>ã€Œ<strong>{{ query }}</strong>ã€ã«ä¸€è‡´ã™ã‚‹æ•™å®¤ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
        
    {% else %}
        <p>éƒ¨å±‹åã‚’å…¥åŠ›ã—ã¦ã€æ•™å®¤ã‚’æ¤œç´¢ã—ã¦ãã ã•ã„ã€‚</p>
        
    {% endif %}

</body>
</html>