<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>imadokoda!</title>
    <style>
        /* å…¨ä½“ã®ãƒ•ã‚©ãƒ³ãƒˆè¨­å®š */
        body {
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
            margin: 20px;
            color: #333;
        }

        h1 {
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        /* ãƒªãƒ³ã‚¯ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        a {
            color: #007bff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }

        /* ãƒ¡ãƒ³ãƒãƒ¼ãƒªã‚¹ãƒˆå…¨ä½“ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .member-list {
            list-style-type: none; /* ãƒ»ã‚’æ¶ˆã™ */
            padding: 0;
            max-width: 600px; /* å¹…åˆ¶é™ */
        }

        /* ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ï¼ˆ1è¡Œã”ã¨ã®æ ï¼‰ */
        .member-list li {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 8px; /* è§’ä¸¸ */
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); /* ã†ã£ã™ã‚‰å½± */
        }

        /* å†™çœŸã¨åå‰ã‚’ã¾ã¨ã‚ã‚‹ã‚¨ãƒªã‚¢ */
        .member-info {
            display: flex;
            align-items: center;
            gap: 15px; /* å†™çœŸã¨åå‰ã®é–“éš” */
            flex-grow: 1; /* ä½™ç™½ã‚’åŸ‹ã‚ã‚‹ */
        }

        /* é¡”å†™çœŸã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .member-photo {
            width: 50px;
            height: 50px;
            border-radius: 50%; /* ä¸¸ãã™ã‚‹ */
            object-fit: cover;  /* æ ã«åˆã‚ã›ã¦ãƒˆãƒªãƒŸãƒ³ã‚° */
            border: 1px solid #ccc;
        }

        /* å†™çœŸãŒãªã„å ´åˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¢ã‚¤ã‚³ãƒ³ */
        .default-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #eee;
            display: flex;       /* ä¸­èº«ã‚’ä¸­å¤®æƒãˆ */
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #888;
            border: 1px solid #ccc;
        }

        /* ãƒ¡ãƒ³ãƒãƒ¼åã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .member-name {
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
        }

        /* ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        select {
            font-size: 1em;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
            cursor: pointer;
        }
        select:hover {
            background-color: #e9e9e9;
        }
    </style>
</head>

<body>
    <h1>â™¨ã„ã¾ã©ã“ã ï¼è¡¨ ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ™ã‚¸ãƒ¼ã‚¿ç‰ˆ</h1>
    <p>ç¾åœ¨ã®ãƒ¡ãƒ³ãƒãƒ¼ã®å±…å ´æ‰€ã§ã™ã€‚ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã‚’å¤‰æ›´ã™ã‚‹ã¨å³æ™‚æ›´æ–°ã•ã‚Œã¾ã™ã€‚</p>

    <p>
        <a href="{% url 'mori_doragon_yuhi_machi:add_place' %}">ğŸ“ å ´æ‰€ã‚’è¿½åŠ </a> | 
        <a href="{% url 'mori_doragon_yuhi_machi:add_member' %}">ğŸ‘¤ ãƒ¡ãƒ³ãƒãƒ¼ã‚’è¿½åŠ </a>
    </p>

    <hr>

    {% load static %}

    <h2>ç¾åœ¨ã®çŠ¶æ³</h2>

    <ul class="member-list">
        
        {% for member in all_members %}
        
        <li>
            <form action="{% url 'mori_doragon_yuhi_machi:update_location' %}" method="POST" style="width: 100%; display: flex; justify-content: space-between; align-items: center;">
                
                {% csrf_token %}
                
                <input type="hidden" name="member_id" value="{{ member.id }}">

                <div class="member-info">
                    
                    {% if member.photo %}
                        <img src="{{ member.photo.url }}" alt="{{ member.name }}" class="member-photo">
                    
                    {% else %}
                        <div class="default-icon">ğŸ‘¤</div>
                    {% endif %}

                    <label for="place-select-{{ member.id }}" class="member-name">
                        {{ member.name }}
                    </label>
                </div>
                <select name="place_id" id="place-select-{{ member.id }}" onchange="this.form.submit()">
                    
                    <option value="" {% if member.current_place is None %}selected{% endif %}>
                        ï¼ˆæœªè¨­å®šï¼‰
                    </option> 

                    {% for place in all_places %}
                        <option 
                            value="{{ place.id }}" 
                            {% if member.current_place == place %}selected{% endif %}
                        >
                            {{ place.name }}
                        </option>
                    {% endfor %}
                </select>
                </form>
        </li>
        
        {% empty %}
            <p>ãƒ¡ãƒ³ãƒãƒ¼ãŒã¾ã ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã€Œãƒ¡ãƒ³ãƒãƒ¼ã‚’è¿½åŠ ã€ã‹ã‚‰ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚</p>
        {% endfor %}

    </ul>

</body>
</html>