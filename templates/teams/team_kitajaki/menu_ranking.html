<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>‰∫∫Ê∞ó„É°„Éã„É•„Éº„É©„É≥„Ç≠„É≥„Ç∞</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: #f7f7f7;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            text-align: center;
        }
        h1 { margin-bottom: 40px; }
        h2 {
            margin-top: 40px;
            border-bottom: 2px solid #007bff;
            display: inline-block;
            padding-bottom: 5px;
            color: #007bff;
        }
        .ranking-table {
            width: 100%;
            max-width: 600px;
            margin: 20px auto;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border-radius: 8px;
            overflow: hidden;
        }
        .ranking-table th, .ranking-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        .ranking-table th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        .rank-col { width: 60px; text-align: center; font-weight: bold; }
        .score-col { width: 160px; text-align: right; color: #666; } /* ‚òÖ Â∞ë„ÅóÂ∫É„Åí„Çã */

        .rank-1 { color: #d4af37; font-size: 1.2em; } /* Èáë */
        .rank-2 { color: #c0c0c0; font-size: 1.1em; } /* ÈäÄ */
        .rank-3 { color: #cd7f32; font-size: 1.1em; } /* ÈäÖ */

        .count-badge {
            color: #888;
            font-size: 0.9em;
            margin-left: 6px;
            white-space: nowrap;
        }

        .back-link { margin-top: 40px; }
        .no-data { color: #888; margin: 20px 0; }
    </style>
</head>
<body>
<div class="container">
    <h1>üèÜ Âñ´Ëå∂„É°„Éã„É•„Éº„É©„É≥„Ç≠„É≥„Ç∞</h1>

    <h2>üëë Á∑èÂêà„É©„É≥„Ç≠„É≥„Ç∞ (TOP 5)</h2>
    {% if ranking_overall %}
        <table class="ranking-table">
            <thead>
                <tr>
                    <th class="rank-col">È†Ü‰Ωç</th>
                    <th>„É°„Éã„É•„ÉºÂêç</th>
                    <th class="score-col">„Çπ„Ç≥„Ç¢</th>
                </tr>
            </thead>
            <tbody>
                {% for item in ranking_overall %}
                <tr>
                    <td class="rank-col rank-{{ forloop.counter }}">{{ forloop.counter }}‰Ωç</td>
                    <td>{{ item.menu_name }}</td>
                    <td class="score-col">
                        ‚òÖ {{ item.overall_score|floatformat:1 }}
                        <span class="count-badge">Ôºà{{ item.rating_count }}‰ª∂Ôºâ</span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="no-data">„Éá„Éº„Çø„ÅåÈõÜË®à„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì</p>
    {% endif %}

    <h2>üòã Âë≥„É©„É≥„Ç≠„É≥„Ç∞</h2>
    {% if ranking_taste %}
        <table class="ranking-table">
            <thead>
                <tr>
                    <th class="rank-col">È†Ü‰Ωç</th>
                    <th>„É°„Éã„É•„ÉºÂêç</th>
                    <th class="score-col">Âë≥„Çπ„Ç≥„Ç¢</th>
                </tr>
            </thead>
            <tbody>
                {% for item in ranking_taste %}
                <tr>
                    <td class="rank-col rank-{{ forloop.counter }}">{{ forloop.counter }}‰Ωç</td>
                    <td>{{ item.menu_name }}</td>
                    <td class="score-col">
                        {{ item.avg_taste|floatformat:1 }}
                        <span class="count-badge">Ôºà{{ item.rating_count }}‰ª∂Ôºâ</span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="no-data">„Éá„Éº„Çø„ÅåÈõÜË®à„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì</p>
    {% endif %}

    <h2>üçö Èáè„É©„É≥„Ç≠„É≥„Ç∞</h2>
    {% if ranking_volume %}
        <table class="ranking-table">
            <thead>
                <tr>
                    <th class="rank-col">È†Ü‰Ωç</th>
                    <th>„É°„Éã„É•„ÉºÂêç</th>
                    <th class="score-col">Èáè„Çπ„Ç≥„Ç¢</th>
                </tr>
            </thead>
            <tbody>
                {% for item in ranking_volume %}
                <tr>
                    <td class="rank-col rank-{{ forloop.counter }}">{{ forloop.counter }}‰Ωç</td>
                    <td>{{ item.menu_name }}</td>
                    <td class="score-col">
                        {{ item.avg_volume|floatformat:1 }}
                        <span class="count-badge">Ôºà{{ item.rating_count }}‰ª∂Ôºâ</span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="no-data">„Éá„Éº„Çø„ÅåÈõÜË®à„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì</p>
    {% endif %}

    <p class="back-link">
        <a href="{% url 'team_kitajaki:today_menu' %}">‰ªäÊó•„ÅÆÂñ´Ëå∂„É°„Éã„É•„Éº„Å∏Êàª„Çã</a>
    </p>
</div>
</body>
</html>
