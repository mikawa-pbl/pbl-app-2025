<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>ä»Šæ—¥ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼è©•ä¾¡ï¼ˆteam_kitajakiï¼‰</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f7f7f7;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 16px 80px;
      text-align: center;
    }
    h1 { margin-bottom: 24px; }
    .today-date {
      font-size: 1.1rem;
      color: #444;
      margin-bottom: 24px;
    }
    .menu-info-card {
      display: inline-block;
      padding: 20px 40px;
      border-radius: 16px;
      background: #ffffff;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      margin-bottom: 48px;
    }
    .menu-label {
      font-size: 0.9rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: #888;
      margin-bottom: 8px;
    }
    .menu-text {
      font-size: 1.5rem;
      font-weight: bold;
    }

    .rating-section {
      background: #ffffff;
      padding: 30px 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      margin-bottom: 30px;
      text-align: left;
    }
    .rating-group {
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px solid #eee;
    }
    .rating-group:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    .rating-label {
      font-size: 1.2rem;
      font-weight: bold;
      color: #333;
      margin-bottom: 15px;
      display: block;
    }

    .face-ratings {
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin-top: 10px;
    }
    .face-rating { text-align: center; cursor: pointer; }
    .face-rating input[type="radio"] { display: none; }
    .face-rating label {
      display: block;
      font-size: 2.5rem;
      transition: transform 0.2s;
      padding: 5px;
      line-height: 1;
      border-radius: 50%;
    }
    .face-rating label:hover { transform: scale(1.1); }
    .face-rating input[type="radio"]:checked + label {
      outline: 3px solid #6c5ce7;
      outline-offset: 2px;
      background: #e8e6fb;
    }

    /* â˜…ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ */
    .comment-label {
      font-size: 1.05rem;
      font-weight: bold;
      color: #333;
      margin: 18px 0 10px;
      display: block;
    }
    .comment-box {
      width: 100%;
      box-sizing: border-box;
      min-height: 90px;
      resize: vertical;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 12px 12px;
      font-size: 1rem;
      outline: none;
      background: #fafafa;
    }
    .comment-box:focus {
      border-color: #6c5ce7;
      background: #fff;
      box-shadow: 0 0 0 3px rgba(108,92,231,0.15);
    }
    .comment-hint {
      color: #777;
      font-size: 0.9rem;
      margin-top: 8px;
    }

    .submit-button {
      background-color: #007bff;
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      margin-top: 20px;
      transition: background-color 0.2s;
    }
    .submit-button:hover { background-color: #0056b3; }

    .back-link { margin-top: 32px; }
    .success-message {
      color: green;
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div class="container">

    <h1>ä»Šæ—¥ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼è©•ä¾¡</h1>

    {% if error_message %}
      <p style="color:red;">{{ error_message }}</p>
    {% endif %}

    {% if today_date %}
      <p class="today-date">
        {{ today_date|date:"næœˆjæ—¥" }}ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼
      </p>
    {% endif %}

    {% if today_menu and today_menu != "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸æ˜" %}
      <div class="menu-info-card">
        <div class="menu-label">å¯¾è±¡ãƒ¡ãƒ‹ãƒ¥ãƒ¼</div>
        <div class="menu-text">{{ today_menu }}</div>
      </div>
    {% endif %}

    {% if success_message %}
      <div class="success-message">{{ success_message }}</div>
      {% if submitted_taste or submitted_volume %}
        <p>ã‚ãªãŸã®è©•ä¾¡: å‘³: <b>{{ submitted_taste }}</b>/5, é‡: <b>{{ submitted_volume }}</b>/5</p>
      {% endif %}
      {% if submitted_comment %}
        <p style="color:#666; margin-top: 8px;">ã‚ãªãŸã®ã‚³ãƒ¡ãƒ³ãƒˆ: {{ submitted_comment }}</p>
      {% endif %}
    {% else %}

      <div class="rating-section">
        <form method="POST">
          {% csrf_token %}

          <div class="rating-group">
            <label class="rating-label">å‘³ã¯ã©ã†ã§ã—ãŸã‹ï¼Ÿ (5æ®µéš)</label>
            <div class="face-ratings">
              <div class="face-rating">
                <input type="radio" id="taste1" name="taste_rating" value="1" required>
                <label for="taste1" title="æœ€ä½ï¼ˆ1ï¼‰">ğŸ˜«</label>
              </div>
              <div class="face-rating">
                <input type="radio" id="taste2" name="taste_rating" value="2">
                <label for="taste2" title="ä¸æº€ï¼ˆ2ï¼‰">ğŸ™</label>
              </div>
              <div class="face-rating">
                <input type="radio" id="taste3" name="taste_rating" value="3">
                <label for="taste3" title="æ™®é€šï¼ˆ3ï¼‰">ğŸ˜</label>
              </div>
              <div class="face-rating">
                <input type="radio" id="taste4" name="taste_rating" value="4">
                <label for="taste4" title="æº€è¶³ï¼ˆ4ï¼‰">ğŸ™‚</label>
              </div>
              <div class="face-rating">
                <input type="radio" id="taste5" name="taste_rating" value="5">
                <label for="taste5" title="æœ€é«˜ï¼ˆ5ï¼‰">ğŸ¤©</label>
              </div>
            </div>
          </div>

          <div class="rating-group">
            <label class="rating-label">é‡ã¯é©åˆ‡ã§ã—ãŸã‹ï¼Ÿ (5æ®µéš)</label>
            <div class="face-ratings">
              <div class="face-rating">
                <input type="radio" id="volume1" name="volume_rating" value="1" required>
                <label for="volume1" title="å°‘ãªã™ãã‚‹ï¼ˆ1ï¼‰">ğŸ¥</label>
              </div>
              <div class="face-rating">
                <input type="radio" id="volume2" name="volume_rating" value="2">
                <label for="volume2" title="å°‘ã—å°‘ãªã„ï¼ˆ2ï¼‰">ğŸ˜Ÿ</label>
              </div>
              <div class="face-rating">
                <input type="radio" id="volume3" name="volume_rating" value="3">
                <label for="volume3" title="é©åˆ‡ï¼ˆ3ï¼‰">ğŸ‘Œ</label>
              </div>
              <div class="face-rating">
                <input type="radio" id="volume4" name="volume_rating" value="4">
                <label for="volume4" title="å°‘ã—å¤šã„ï¼ˆ4ï¼‰">ğŸ˜‹</label>
              </div>
              <div class="face-rating">
                <input type="radio" id="volume5" name="volume_rating" value="5">
                <label for="volume5" title="å¤šã™ãã‚‹ï¼ˆ5ï¼‰">ğŸ·</label>
              </div>
            </div>

            <!-- â˜…ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ï¼ˆAmazonã£ã½ã„è‡ªç”±è¨˜è¿°ï¼‰ -->
            <label class="comment-label" for="comment">ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆä»»æ„ï¼‰</label>
            <textarea id="comment" name="comment" class="comment-box" maxlength="300"
              placeholder="ä¾‹ï¼šã‚¯ãƒªãƒ¼ãƒŸãƒ¼ã§ç¾å‘³ã—ã„ã€‚é‡ã‚‚ã¡ã‚‡ã†ã©è‰¯ã‹ã£ãŸã€‚"></textarea>
            <div class="comment-hint">â€»300æ–‡å­—ã¾ã§ã€‚å€‹äººæƒ…å ±ã‚„èª¹è¬—ä¸­å‚·ã¯æ›¸ã‹ãªã„ã§ãã ã•ã„ã€‚</div>
          </div>

          <button type="submit" class="submit-button">è©•ä¾¡ã‚’é€ä¿¡</button>
        </form>
      </div>

    {% endif %}

    <p class="back-link">
      <a href="{% url 'team_kitajaki:today_menu' %}">ä»Šæ—¥ã®å–«èŒ¶ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¸æˆ»ã‚‹</a>
    </p>
  </div>
</body>
</html>
