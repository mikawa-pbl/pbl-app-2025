{% load static %}
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ room.title }} - Team Terrace Chat</title>
    <link rel="stylesheet" href="{% static 'team_terrace/css/room.css' %}">
</head>
<body>
    <header class="app-header">
        <a href="{% url 'team_terrace:index' %}" class="app-logo">
            <span>ğŸ”™</span> Anony Chat
        </a>
    </header>

    <div id="chat-container">
        <!-- Messages will be loaded here -->
    </div>

    <!-- Reaction Animation Container (Canvas) -->
    <div id="reaction-canvas"></div>

    <!-- Reaction Bar (Above Input Area) -->
    <div class="reaction-bar">
        <button class="reaction-btn" onclick="sendReaction('like')">
            <span class="reaction-icon">ğŸ‘</span>
            <span class="reaction-label">ã„ã„ã­</span>
        </button>
        <button class="reaction-btn" onclick="sendReaction('heh')">
            <span class="reaction-icon">ğŸ˜®</span>
            <span class="reaction-label">ã¸ã‡ã€œ</span>
        </button>
        <button class="reaction-btn" onclick="sendReaction('question')">
            <span class="reaction-icon">â“</span>
            <span class="reaction-label">ï¼Ÿï¼Ÿï¼Ÿ</span>
        </button>
        <button class="reaction-btn" onclick="sendReaction('clap')">
            <span class="reaction-icon">ğŸ‘</span>
            <span class="reaction-label">ã±ã¡ã±ã¡</span>
        </button>
    </div>

    <div id="input-area">
        {% csrf_token %}
        <label style="display: flex; align-items: center; margin-right: 5px;">
            <input type="checkbox" id="is-question"> è³ªå•
        </label>
        <input type="text" id="message-input" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›...">
        <button id="send-button">é€ä¿¡</button>
    </div>

    <div id="thread-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>ã‚¹ãƒ¬ãƒƒãƒ‰</h2>
            <div id="thread-messages"></div>
            <div style="margin-top: 10px; display: flex; gap: 5px;">
                <input type="text" id="reply-input" style="flex: 1; padding: 5px;" placeholder="è¿”ä¿¡...">
                <button onclick="sendReply()">è¿”ä¿¡</button>
            </div>
        </div>
    </div>

    <script>
        const roomId = "{{ room.uuid }}";
    </script>
    <script src="{% static 'team_terrace/js/room.js' %}"></script>
</body>
</html>
